<link rel="import" href="../app/components/polymer/polymer.html" />
<link rel="import" href="../app/components/polymer-ajax/polymer-ajax.html" />
<link rel="import" href="scoreSettings.html" />
<link rel="import" href="scoreHeader.html" />
<link rel="import" href="scoreCanvas.html" />
<polymer-element name="smw-score-body">
    <template>
        <style>
            :host {
                border: solid 1px #EEE;
                display: block;
                height: 1100px;
                margin: 10px;
                padding: 20px;
                width: 850px;
            }
            :host(.landscape) {
                height: 850px;
                width: 1100px;
            }
        </style>
        <polymer-ajax auto url="/testData/testScore.json"
            handleAs="json"
            on-polymer-response="{{ scoreReceived }}">
        </polymer-ajax>
        <smw-score-settings id="globalSettings"></smw-score-settings>
        <smw-score-header id="scoreHeader" data="{{ scoreData.header }}"></smw-score-header>
        <smw-score-canvas id="scoreCanvas" data="{{ scoreData.music }}" settings="{{ scoreSettings }}" width="{{ width }}"></smw-score-canvas>
    </template>
    <script>
        (function() {
            'use strict';
            Polymer('smw-score-body', {
                scoreReceived: function(e) {
                    this.scoreData = e.detail.response;
                    this.scoreSettings = this.$.globalSettings.settings;
                    this.width = (this.scoreSettings.orientation === 'portrait') ? 850 : 1100;
                }
            });
        })();
    </script>
</polymer-element>
