<link rel="import" href="../app/components/polymer/polymer.html">
<polymer-element name="smw-scoreHeader" attributes="data">
    <template>
        <style>
            :host {
                display: block;
            }
            #headerTitle {
                font-size: 2.7em;
                margin: auto;
                text-align: center;
                width: 100%;
            }
            .infoRegion {
                float: left;
                width: 50%;
            }
            #headerRight {
                text-align: right;
            }
        </style>
        <div id="headerTitle" contenteditable="true" on-blur="{{infoUpdated}}" data-field-name="title">
            {{data.header.title}}
        </div>
        <div id="scoreInfo">
            <div id="headerLeft" class="infoRegion">
                <div id="headerType" contenteditable="true" on-blur="{{infoUpdated}}" data-field-name="type">
                    {{data.header.type}}
                </div>
                <div id="headerInstrument" contenteditable="true" on-blur="{{infoUpdated}}" data-field-name="instrument">
                    {{data.header.instrument}}
                </div>
            </div>
            <div id="headerRight" class="infoRegion">
                <div id="headerComposer" contenteditable="true" on-blur="{{infoUpdated}}" data-field-name="composer">
                    {{data.header.composer}}
                </div>
                <div id="headerYear" contenteditable="true" on-blur="{{infoUpdated}}" data-field-name="year">
                    {{data.header.year}}
                </div>
            </div>
        </div>
    </template>
    <script>
        (function() {
            'use strict';
            Polymer('smw-scoreHeader', {
                created: function() {
                    this.data = { header: {} };
                },
                dataUpdated: function() {
                    console.log('data updated');
                },
                infoUpdated: function(e, index, element) {
                    console.log('info updated');
                    var newValue = e.currentTarget.textContent;
                    var boundAttribute = element.dataset.fieldName;
                    var newData = this.data;
                    newData.header[boundAttribute] = newValue;
                    this.data = newData;
                }
            });
        })();
    </script>
</polymer-element>
